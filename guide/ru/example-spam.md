Спам фильтр
===

Задача: классифицировать смс-сообщения по критериям:

* спам
* не спам

В качестве материала для обучения, используем маркированную коллекцию СМС сообщений (5572 шт).

## Тесты

Для проведения тестов, я делил коллекцию на тренировочную и тестовую в процентном соотношении.

1% тренировки означает:
 
 * для обучения - 55 сообщ.
 * для тестирования - 5517 сообщ.

90% тренировки означает:
 
 * для обучения - 5014 сообщ.
 * для тестирования - 558 сообщ.

Чем выше процент statsPercent.ok, тем качественней работает нейронка.
При этом, чем ниже процент данных для обучения, тем лучше.

0.1% тренировки:

```php
'statsPercent' => [
		'ok' => '42.015448176756',
		'fail' => '57.948625830789',
	],
	'stats' => [
		'ok' => '2339',
		'fail' => '3226',
		'testCount' => '5567',
		'trainingCount' => '5',
		'totalCount' => '5572',
	],
	'benchmark' => [
		'train' => '0.0032150745391846',
		'test' => '0.067497968673706',
	],
```

0.5% тренировки:

```php
'statsPercent' => [
		'ok' => '79.0261496844',
		'fail' => '20.937781785392',
	],
	'stats' => [
		'ok' => '4382',
		'fail' => '1161',
		'testCount' => '5545',
		'trainingCount' => '27',
		'totalCount' => '5572',
	],
	'benchmark' => [
		'train' => '0.0015518665313721',
		'test' => '0.071785926818848',
	],
```

1% тренировки:

```php
[
	'statsPercent' => [
		'ok' => '79.753489215153',
		'fail' => '20.21025919884',
	],
	'stats' => [
		'ok' => '4400',
		'fail' => '1115',
		'testCount' => '5517',
		'trainingCount' => '55',
		'totalCount' => '5572',
	],
	'benchmark' => [
		'train' => '0.0037510395050049',
		'test' => '0.068473815917969',
	],
]
```

5% тренировки:

```php
[
	'statsPercent' => [
		'ok' => '91.74537211938',
		'fail' => '8.216849263317',
	],
	'stats' => [
		'ok' => '4857',
		'fail' => '435',
		'testCount' => '5294',
		'trainingCount' => '278',
		'totalCount' => '5572',
	],
	'benchmark' => [
		'train' => '0.0031960010528564',
		'test' => '0.068819999694824',
	],
]
```

50% тренировки:

```php
[
	'statsPercent' => [
		'ok' => '95.764536970567',
		'fail' => '4.1995692749462',
	],
	'stats' => [
		'ok' => '2668',
		'fail' => '117',
		'testCount' => '2786',
		'trainingCount' => '2786',
		'totalCount' => '5572',
	],
	'benchmark' => [
		'train' => '0.023989915847778',
		'test' => '0.040333986282349',
	],
]
```

90% тренировки:

```php
[
	'statsPercent' => [
		'ok' => '97.311827956989',
		'fail' => '2.6881720430108',
	],
	'stats' => [
		'ok' => '543',
		'fail' => '15',
		'testCount' => '558',
		'trainingCount' => '5014',
		'totalCount' => '5572',
	],
	'benchmark' => [
		'train' => '0.047518968582153',
		'test' => '0.0093069076538086',
	],
]
```

97% тренировки:

```php
[
	'statsPercent' => [
		'ok' => '99.404761904762',
		'fail' => '0.5952380952381',
	],
	'stats' => [
		'ok' => '167',
		'fail' => '1',
		'testCount' => '168',
		'trainingCount' => '5404',
		'totalCount' => '5572',
	],
	'benchmark' => [
		'train' => '0.051523923873901',
		'test' => '0.0041019916534424',
	],
]
```


99% тренировки:

```php
[
	'statsPercent' => [
		'ok' => '100',
		'fail' => '0',
	],
	'stats' => [
		'ok' => '56',
		'fail' => '0',
		'testCount' => '56',
		'trainingCount' => '5516',
		'totalCount' => '5572',
	],
	'benchmark' => [
		'train' => '0.054908990859985',
		'test' => '0.0014879703521729',
	],
]
```

## Вывод

Нейронка довольно не плохо справилась с задачей на 5% тренировки, выдавая точно результата в 91%.

При повышении процента тренировки с 5 и выше, точность повышается не значительно.

Разница в точности классификации между 5% и 90% тренировок составляет:

* 5% трен. - 91% точность
* 90 трен. - 97% точность

## Улучшения

Можно повысить точно благодаря более аккуратной векторизации данных.

Например:

* вырезать из текста символы и числа
* преобразовывать текст в lower case
* резать окончания слов
