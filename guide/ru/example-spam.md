Спам фильтр
===

Задача: классифицировать смс-сообщения по критериям:

* спам
* не спам

В качестве материала для обучения, используем маркированную коллекцию СМС сообщений (5572 шт).

## Тесты

Для проведения тестов, я делил коллекцию на тренировочную и тестовую в процентном соотношении.

1% тренировки означает:
 
 * для обучения - 55 сообщ.
 * для тестирования - 5517 сообщ.

90% тренировки означает:
 
 * для обучения - 5014 сообщ.
 * для тестирования - 558 сообщ.

Чем выше процент statsPercent.ok, тем качественней работает нейронка.
При этом, чем ниже процент данных для обучения, тем лучше.

```php
[
	'0.1' => [
		'collection' => [
			'total' => '100% (5570)',
			'train' => '0.1% (5)',
			'test' => '99.9% (5565)',
		],
		'test' => [
			'ok' => '42.03% (2339)',
			'fail' => '57.97% (3226)',
		],
		'benchmark' => [
			'train' => '0.0013 sec.',
			'test' => '0.0646 sec.',
		],
	],
	'0.5' => [
		'collection' => [
			'total' => '100% (5570)',
			'train' => '0.5% (27)',
			'test' => '99.5% (5543)',
		],
		'test' => [
			'ok' => '79.05% (4382)',
			'fail' => '20.95% (1161)',
		],
		'benchmark' => [
			'train' => '0.0003 sec.',
			'test' => '0.0677 sec.',
		],
	],
	1 => [
		'collection' => [
			'total' => '100% (5570)',
			'train' => '1% (55)',
			'test' => '99% (5515)',
		],
		'test' => [
			'ok' => '79.78% (4400)',
			'fail' => '20.22% (1115)',
		],
		'benchmark' => [
			'train' => '0.0005 sec.',
			'test' => '0.066 sec.',
		],
	],
	5 => [
		'collection' => [
			'total' => '100% (5570)',
			'train' => '5% (278)',
			'test' => '95% (5292)',
		],
		'test' => [
			'ok' => '91.78% (4857)',
			'fail' => '8.22% (435)',
		],
		'benchmark' => [
			'train' => '0.002 sec.',
			'test' => '0.0639 sec.',
		],
	],
	90 => [
		'collection' => [
			'total' => '100% (5570)',
			'train' => '90% (5013)',
			'test' => '10% (557)',
		],
		'test' => [
			'ok' => '97.31% (542)',
			'fail' => '2.69% (15)',
		],
		'benchmark' => [
			'train' => '0.0426 sec.',
			'test' => '0.0077 sec.',
		],
	],
]
```

## Вывод

Нейронка довольно не плохо справилась с задачей на 5% тренировки, выдавая точно результата в 91%.

При повышении процента тренировки с 5 и выше, точность повышается не значительно.

Разница в точности классификации между 5% и 90% тренировок составляет:

* 5% трен. - 91% точность
* 90 трен. - 97% точность

## Улучшения

Можно повысить точно благодаря более аккуратной векторизации данных.

Например:

* вырезать из текста символы
* все числа преобразовать по маске (999999)
* удалить двойные пробелы и переводы строк
* преобразовать текст в lower case

Результат до оптимизации:

```php
[
	'0.1% (5)' => '42.03% (2339)',
	'0.5% (27)' => '79.05% (4382)',
	'1% (55)' => '79.78% (4400)',
	'5% (278)' => '91.78% (4857)',
	'90% (5013)' => '97.31% (542)',
]
```

после оптимизации:

```php
[
	'0.1% (5)' => '55.11% (3067)',
	'0.5% (27)' => '85.26% (4726)',
	'1% (55)' => '89.05% (4911)',
	'5% (278)' => '95.88% (5074)',
	'90% (5013)' => '98.92% (551)',
]
```

После оптимизации производительность просела в 2 раза.
